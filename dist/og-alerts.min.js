/**
 * AngularJS module for displaying alert notifications.
 * @version v0.0.1
 * @license MIT
 */
!function(e,t){"object"==typeof module&&module.exports?t("undefined"==typeof angular?require("angular"):angular):"function"==typeof define&&define.amd?define(["angular"],t):t(e.angular)}(this,function(e){e.module("ogAlerts",["og-alerts.templates"]),e.module("ogAlerts").provider("$ogAlertsConfig",["OG_DEFAULT_ALERTS_TYPES",function(e){var o=this.options={allowDuplicates:!1,template:null,templateUrl:"alerts.html",timeout:6e3,limit:t,alertTypes:[{name:e.INFO,classes:["alert-info"]},{name:e.SUCCESS,classes:["alert-success"]},{name:e.WARN,classes:["alert-warning"]},{name:e.ERROR,classes:["alert-danger"]}]};this.$get=function(){return{options:o}}}]),e.module("ogAlerts").controller("$ogAlertsController",["$scope","$rootScope","$timeout","$ogAlertsConfig","OG_ALERTS_EVENTS",function(e,t,o,n,r){function s(e){var t=g.options.allowDuplicates,o=!E[e.message];return t||o}function l(e){var t=g.options.alertTypes.filter(function(t){return t.name===e.type})[0]||{},o=t.classes||[];return o.concat(e.$$data.options.classes||[])}function i(e){s(e)&&($.push(e),e.classes=l(e),E[e.message]=!0)}function a(e){var t=e.$$data.options.timeout;t=void 0===t?g.options.timeout:t,t&&g.close(e.id,t)}function u(e){var t=d[e];if(t||0===t){var o=g.alerts.splice(t,1)[0];delete E[o.message],delete d[e],f()}}function c(e){var t=g.alerts.length;g.alerts.push(e),d[e.id]=t}function f(){if(g.alerts.length<g.options.limit){var e=$.shift();e&&(a(e),c(e))}}function m(t){var o=e[t];return void 0===o?n.options[t]:o}function p(){var e={};return Object.keys(n.options).forEach(function(t){e[t]=m(t)}),e}var g=this,E={},$=[],d={};g.options=p(),g.alerts=[],g.close=function(e,t){o(function(){u(e)},t||0)},t.$on(r.$$OPEN_EVENT,function(e,t){i(t),f()}),t.$on(r.$$CLOSE_EVENT,function(e,t){g.close(t)})}]),e.module("og-alerts.templates",[]).run(["$templateCache",function(e){e.put("alerts.html",'<div ng-repeat="alert in vm.alerts"><div class="alert alert-warning alert-dismissible" ng-class="alert.classes" role="alert"><button type="button" class="close" ng-click="vm.close(alert.id)"><span>&times;</span></button><div ng-bind="alert.message"></div></div></div>')}]);var t=Math.pow(2,53)-1,o="$translate";e.module("ogAlerts").service("$ogAlerts",["$q","$log","$rootScope","$timeout","$injector","OG_ALERTS_EVENTS","OG_DEFAULT_ALERTS_TYPES",function(e,n,r,s,l,i,a){function u(){return m>=t&&(m=0),++m}function c(){return l.has(o)?l.get(o):function(t){return e.resolve(t)}}function f(t,o,s,l){var a=u(),c=e.defer(),f=e.defer(),m=e.defer(),g=p(o,s).then(function(e){var o={id:a,type:t,message:e,$$data:{options:l||{},deferreds:{onClose:c,onQueue:f,onDisplay:m}}};r.$emit(i.$$OPEN_EVENT,o)})["catch"](function(e){n.error("Failed to translate message: "+o,e)});return{id:a,onClosePromise:c.promise,onQueuePromise:f.promise,onDisplayPromise:m.promise,close:function(){g.then(function(){r.$emit(i.$$CLOSE_EVENT,a)})}}}var m=0,p=c();return{show:function(e,t,o,n){return f(e,t,o,n)},error:function(e,t,o){return f(a.ERROR,e,t,o)},warn:function(e,t,o){return f(a.WARN,e,t,o)},info:function(e,t,o){return f(a.INFO,e,t,o)},success:function(e,t,o){return f(a.SUCCESS,e,t,o)},closeAll:function(){r.$emit(i.$$CLOSE_EVENT)}}}]),e.module("ogAlerts").constant("OG_ALERTS_EVENTS",{$$OPEN_EVENT:"og-alerts:$$event:open",$$CLOSE_EVENT:"og-alerts:$$event:close"}).constant("OG_DEFAULT_ALERTS_TYPES",{ERROR:"error",WARN:"warn",INFO:"info",SUCCESS:"success"}),e.module("ogAlerts").directive("ogAlerts",["$ogAlertsConfig",function(e){var t={restrict:"AE",scope:{limit:"=?ogLimit",timeout:"=?ogTimeout",allowDuplicates:"=?ogAllowDuplicates"},controller:"$ogAlertsController",controllerAs:"vm"},o=e.options;return o.template?t.template=o.template:t.templateUrl=function(e,t){return t.ogTemplateUrl||o.templateUrl},t}])});